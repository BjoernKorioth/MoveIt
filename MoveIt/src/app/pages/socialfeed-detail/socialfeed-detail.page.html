<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Socialfeed</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="cards-bg social-cards">
  <ion-button type="button" (click)='newPost()'>New Post</ion-button>
  <ion-button type="button" (click)='editPost()'>Edit Post</ion-button>
  <ion-button type="button" (click)='like()'>Like</ion-button>
  <ion-button type="button" (click)='unlike()'>Unlike</ion-button>
  <ion-button type="button" (click)='getPost()'>Get Post</ion-button>
  <ion-button type="button" (click)='getAllPosts()'>Get All Posts</ion-button>
  <ion-button type="button" (click)='newComment()'>New Comment</ion-button>
  <ion-button type="button" (click)='editComment()'>Edit Comment</ion-button>
  <ion-button type="button" (click)='getComment()'>Get Comment</ion-button>
  <ion-button type="button" (click)='getAllComments()'>Get All Comments</ion-button>

  <ion-card *ngFor="let post of (posts | async)">

    <ion-item>
      <ion-avatar slot="start">
        <img src="../../assets/Profilbild.jpg">
        <!--img [src]="post.image"-->
      </ion-avatar>
      <ion-label>
        <h3>{{post.user}}</h3>
        <p><ion-icon name="time"></ion-icon> 5 minutes {{getTimeDifference(post.createdAt)}} ago</p>
      </ion-label>
    </ion-item>
    <!--<img src="../assets/Laufschuhe.jpg">-->

    <ion-card-content>
      {{post.content}}
    </ion-card-content>


    <ion-row>
      <ion-col center text-center>
          <ion-button type="button" (click)='like()'><ion-icon name="thumbs-up" style="margin-right: 5px"></ion-icon>{{post.likes?.length || 0}} Likes</ion-button>
      </ion-col>
      <ion-col center text-center>
          <ion-button type="button" (click)='newComment()'><ion-icon name="text" style="margin-right: 5px"></ion-icon>Comment</ion-button>
          <div>{{post.comments?.length || 0}} Comments</div>
      </ion-col>
    </ion-row>

    <div>
      <ion-item lines="none" *ngFor="let c of comments; let i=index">
        <ion-label *ngIf="i<1"><h3>{{c.name}}</h3> <p>{{c.comment}}</p></ion-label>
        <ion-label *ngIf="i == 1"><p style="font-style:italic;">all comments</p></ion-label>
      </ion-item>
    </div>

  </ion-card>

</ion-content>

